<!-- 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Dictionary App</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

    <div class="app-container">
        <!-- Dictionary Card -->
        <!-- <div class="dictionary-card">
            <h1>AWS Dictionary</h1>
            <input type="text" id="wordInput" placeholder="Type a word..." />
            <button onclick="getDefinition()">Search</button>
            <div class="definition" id="definition"></div>
            <div class="error" id="error"></div>
        </div> -->

        <!-- Email Subscription Card -->
        <!-- <div class="subscribe-card">
            <h2>Subscribe to Updates</h2>
            <input type="email" id="emailInput" placeholder="Enter your email..." />
            <button onclick="subscribeEmail()">Subscribe</button>
            <div class="subscribe-message" id="subscribeMessage"></div>
        </div>
    </div> -->

    <!-- <script>
        async function getDefinition() {
            const word = document.getElementById('wordInput').value.trim();
            const defDiv = document.getElementById('definition');
            const errorDiv = document.getElementById('error');

            defDiv.innerHTML = '';
            errorDiv.innerHTML = '';

            if (!word) {
                errorDiv.textContent = 'Please enter a word!';
                return;
            }

            defDiv.textContent = "Loading...";

            const API_URL = "https://oi5pc283hj.execute-api.eu-west-1.amazonaws.com/default/nira-glossary-function?word=" 
                            + encodeURIComponent(word);

            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                if (data.error) {
                    defDiv.innerHTML = `<p style=" text-align: center;">
                        <a href="https://docs.aws.amazon.com/glossary/latest/reference/glos-chap.html"><b>Refer to AWS glossary</b></a>
                    </p>`;
                    errorDiv.textContent = data.error;
                    return;
                }
                let html= `<h2>${data.word}</h2>
                    <p><strong>Definition:</strong> ${data.definition}</p>`
                if (data.relatedTerms && data.relatedTerms.length > 0) {
                    html += `<p><strong>Other related terms: </strong> ${data.relatedTerms}</p>`;
                }    
                defDiv.innerHTML = html;
                wordInput.value = '';
            } catch (e) {
                defDiv.innerHTML = '';
                errorDiv.textContent = "Unable to fetch definition.";
            }
        }

        async function subscribeEmail() {
            const emailInput = document.getElementById('emailInput').value.trim();
            const messageDiv = document.getElementById('subscribeMessage');

            messageDiv.innerHTML = '';
            if (!emailInput) {
                messageDiv.textContent = 'Please enter an email!';
                messageDiv.style.color = 'red';
                return;
             }
            messageDiv.innerHTML = '';
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!emailPattern.test(emailInput)) {
                messageDiv.textContent = 'Please enter a valid email!';
                messageDiv.style.color = 'red';
                return;
            }

            const API_SUBSCRIBE_URL = "https://4km4cnxnj8.execute-api.eu-west-1.amazonaws.com/default/subscribe-function?email=" + encodeURIComponent(emailInput); // Replace with actual subscription API

            try {
                const response = await fetch(API_SUBSCRIBE_URL);
                const body = await response.json();
                console.log(body);

                if (response.ok === false) {
                    messageDiv.textContent = "Subscription failed. Please try again later.";
                    messageDiv.style.color = 'red';
                    return;
                }
                messageDiv.textContent = body;
                messageDiv.style.color = 'green';
                document.getElementById('emailInput').value = '';
                return;
            } 
            catch (e) {
                messageDiv.textContent = 'Subscription failed. Please try again later.';
                messageDiv.style.color = 'red';
                return;
            }

            
        }
    </script>

</body>
</html>


 --> 

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Glossary App</title>

    <!-- Your existing CSS -->
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="app-container">

    <!-- ================= Dictionary Card ================= -->
    <div class="dictionary-card">
        <h1>AWS Dictionary</h1>

        <!-- Word Input -->
        <input
            type="text"
            id="wordInput"
            placeholder="Type an AWS term..."
        />

        <!-- Language Selector -->
        <select id="languageSelect">
    <option value="en">English</option>
    <option value="fr">French</option>
    <option value="de">German</option>
    <option value="es">Spanish</option>
    <option value="it">Italian</option>
    <option value="pt">Portuguese</option>
    <option value="nl">Dutch</option>
    <option value="sv">Swedish</option>
    <option value="no">Norwegian</option>
    <option value="da">Danish</option>
    <option value="fi">Finnish</option>
    <option value="pl">Polish</option>
    <option value="cs">Czech</option>
    <option value="sk">Slovak</option>
    <option value="hu">Hungarian</option>
    <option value="ro">Romanian</option>
    <option value="bg">Bulgarian</option>
    <option value="el">Greek</option>
    <option value="uk">Ukrainian</option>
    <option value="hr">Croatian</option>
</select>


        <!-- Search Button -->
        <button onclick="getDefinition()">Search</button>

        <!-- Single Output Area -->
        <div class="definition" id="definition"></div>
        <div class="error" id="error"></div>
    </div>

    <!-- ================= Subscribe Card ================= -->
    <div class="subscribe-card">
        <h2>Subscribe to Updates</h2>

        <input
            type="email"
            id="emailInput"
            placeholder="Enter your email..."
        />

        <button onclick="subscribeEmail()">Subscribe</button>

        <div class="subscribe-message" id="subscribeMessage"></div>
    </div>

</div>

<!-- ================= JavaScript ================= -->
<script>
async function getDefinition() {
    const word = document.getElementById("wordInput").value.trim();
    const targetLanguage = document.getElementById("languageSelect").value;

    const definitionDiv = document.getElementById("definition");
    const errorDiv = document.getElementById("error");

    // Reset UI
    definitionDiv.innerHTML = "";
    errorDiv.textContent = "";

    if (!word) {
        errorDiv.textContent = "Please enter a word!";
        return;
    }

    definitionDiv.textContent = "Loading...";

    // Backend API (Glossary + Translate)
    const API_URL =
        "https://oi5pc283hj.execute-api.eu-west-1.amazonaws.com/default/nira-glossary-function"
        + "?word=" + encodeURIComponent(word)
        + "&targetLanguage=" + encodeURIComponent(targetLanguage);

    try {
        const response = await fetch(API_URL);
        const data = await response.json();

        if (data.error) {
            definitionDiv.innerHTML = `
                <p style="text-align:center;">
                    <a href="https://docs.aws.amazon.com/glossary/latest/reference/glos-chap.html">
                        <b>Refer to AWS Glossary</b>
                    </a>
                </p>`;
            errorDiv.textContent = data.error;
            return;
        }

        // Use ONE definition only
        const finalDefinition =
            (targetLanguage === "en" || !data.translatedDefinition)
                ? data.definition
                : data.translatedDefinition;

        let html = `
            <h2>${data.word}</h2>
            <p>${finalDefinition}</p>
        `;

        if (data.relatedTerms && data.relatedTerms.length > 0) {
            html += `
                <p><strong>Related Terms:</strong> ${data.relatedTerms}</p>
            `;
        }

        definitionDiv.innerHTML = html;
        document.getElementById("wordInput").value = "";

    } catch (error) {
        definitionDiv.innerHTML = "";
        errorDiv.textContent = "Unable to fetch definition.";
    }
}

async function subscribeEmail() {
    const email = document.getElementById("emailInput").value.trim();
    const messageDiv = document.getElementById("subscribeMessage");

    messageDiv.textContent = "Loading";

    if (!email) {
        messageDiv.textContent = "Please enter an email!";
        messageDiv.style.color = "red";
        return;
    }

    const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailPattern.test(email)) {
        messageDiv.textContent = "Please enter a valid email!";
        messageDiv.style.color = "red";
        return;
    }

    const API_SUBSCRIBE_URL =
        "https://4km4cnxnj8.execute-api.eu-west-1.amazonaws.com/default/subscribe-function"
        + "?email=" + encodeURIComponent(email);

    try {
        const response = await fetch(API_SUBSCRIBE_URL);
        const body = await response.json();

        if (!response.ok) {
            messageDiv.textContent = "Subscription failed. Try again later.";
            messageDiv.style.color = "red";
            return;
        }

        messageDiv.textContent = body;
        messageDiv.style.color = "green";
        document.getElementById("emailInput").value = "";

    } catch (error) {
        messageDiv.textContent = "Subscription failed. Please try again later.";
        messageDiv.style.color = "red";
    }
}
</script>

</body>
</html>




